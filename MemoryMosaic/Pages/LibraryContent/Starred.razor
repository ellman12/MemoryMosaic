@page "/starred"

<title>Starred - MemoryMosaic</title>
<link href="css/LibraryContentPage.css" rel="stylesheet"/>

@{
    <header>
        <span id="starredText">Starred</span>
        @if (lcv.Header.Visible)
        {
            <button class="iconBtn" @onclick="@lcv.ClearChecks"><span class="material-icons-outlined">close</span></button>
            <span id="selectedAmtText">@lcv.SelectedItemsCount&nbsp;&nbsp;Selected</span>
            <div id="buttons">
                <IconButton Icon="file_download" OnClick="@lcv.DownloadSelected"/>
                <button class="iconBtn" @onclick="@lcv.cs.Toggle"><span class="material-icons-outlined">collections</span></button>
                <button class="iconBtn" title="Remove Stars From Selected" @onclick="@(() => lcv.UpdateStars(false))"><span class="material-icons-outlined">star_outline</span></button>
                <IconButton Icon="trash" OnClick="@lcv.DeleteBtnClick"/>
            </div>
        }
    </header>

    const string Shared = "SELECT path, date_taken, date_added, starred, uuid, thumbnail, description FROM media WHERE starred = true AND date_deleted IS NULL AND date_taken";
    const string FirstQuery = $"{Shared} IS NOT NULL ORDER BY date_taken DESC LIMIT 100";
    const string TopQuery = $"{Shared} >= @oldestOrNewestDT ORDER BY date_taken ASC LIMIT 100";
    const string BottomQuery = $"{Shared} <= @oldestOrNewestDT ORDER BY date_taken DESC LIMIT 100";
    <LibraryContentViewer @ref="@lcv" FirstQuery="@FirstQuery" NotNullDTQueryTop="@TopQuery" NotNullDTQueryBottom="@BottomQuery" NoItemsText="Items Marked As Starred and with a Date Taken Appear Here" Rerender="@StateHasChanged"/>
}

@code {
    private LibraryContentViewer lcv = new();
}